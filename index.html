<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photography 101 - Assignment Grading System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .student-info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .student-info input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .photo-section {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .photo-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .photo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .photo-title {
            font-size: 1.5rem;
            color: #667eea;
            font-weight: 600;
        }

        .photo-goal {
            font-style: italic;
            color: #6c757d;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .score-display {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }

        .criteria-category {
            margin-bottom: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .criteria-category h4 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-score {
            margin-left: auto;
            color: #667eea;
            font-weight: normal;
        }

        .checkpoint-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 8px;
            background: white;
            border-radius: 5px;
            transition: background 0.2s;
        }

        .checkpoint-item:hover {
            background: #e9ecef;
        }

        .checkpoint-item input[type="checkbox"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkpoint-text {
            flex: 1;
            font-size: 0.95rem;
        }

        .checkpoint-points {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            color: #6c757d;
        }

        .checkpoint-points input {
            width: 40px;
            padding: 4px;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-align: center;
            font-size: 0.9rem;
        }

        .comment-section {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .comment-section h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .comment-section textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            min-height: 100px;
            font-size: 14px;
            background: white;
        }

        .quick-comments {
            margin-top: 10px;
        }

        .quick-comment-btn {
            background: #e9ecef;
            border: none;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .quick-comment-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .reflection-section {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .reflection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .reflection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .reflection-item input {
            width: 60px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-align: center;
        }

        .final-grade {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
        }

        .grade-display {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
        }

        .grade-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .breakdown-item {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }

        .grade-descriptor {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin-top: 20px;
            text-align: left;
        }

        .descriptor-item {
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            background: #f8f9fa;
            transition: all 0.3s;
        }

        .descriptor-item.active {
            background: #667eea;
            color: white;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a54d8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .progress-indicator {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-text {
            font-weight: bold;
            color: #333;
        }

        .progress-bar {
            flex: 1;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .criteria-category {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        @media print {
            .btn, .quick-comment-btn {
                display: none;
            }
            
            .photo-section, .reflection-section, .final-grade {
                break-inside: avoid;
            }
            
            .progress-indicator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📸 Photography 101 - Assignment 1: Photographic Techniques</h1>
            <p>Comprehensive Grading System with Detailed Checkpoints</p>
        </div>

        <div class="progress-indicator">
            <span class="progress-text">Grading Progress:</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <span id="progressPercent">0%</span>
        </div>

        <div class="student-info">
            <h3>Student Information</h3>
            <input type="text" id="studentName" placeholder="Student Name">
            <input type="text" id="studentId" placeholder="Student ID">
            <input type="date" id="gradingDate" value="">
        </div>

        <!-- Photo 1: Long Exposure -->
        <div class="photo-section" data-photo="1" data-max-score="25">
            <div class="photo-header">
                <div>
                    <h3 class="photo-title">📷 Photo 1 - Long Exposure</h3>
                    <p class="photo-goal">Goal: Capture motion over time (e.g., light trails, flowing water, ghosting)</p>
                </div>
                <div class="score-display">
                    <span id="photo1Score">0</span> / 25
                </div>
            </div>

            <!-- Technical Criteria -->
            <div class="criteria-category">
                <h4>
                    🔧 Technical Execution
                    <span class="category-score" id="photo1TechnicalScore">0 / 15</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p1t1" data-points="4" onchange="updateScores()">
                    <label for="p1t1" class="checkpoint-text">Use of slow shutter speed (e.g. 1s or longer) clearly visible</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1t1_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p1t2" data-points="3" onchange="updateScores()">
                    <label for="p1t2" class="checkpoint-text">Image is correctly exposed (not blown out or overly dark)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1t2_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p1t3" data-points="3" onchange="updateScores()">
                    <label for="p1t3" class="checkpoint-text">Camera stability (tripod or stable surface — no unintentional blur)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1t3_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p1t4" data-points="3" onchange="updateScores()">
                    <label for="p1t4" class="checkpoint-text">Clear motion effect (e.g., light trails, subject movement) is visually noticeable</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1t4_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p1t5" data-points="2" onchange="updateScores()">
                    <label for="p1t5" class="checkpoint-text">Caption includes full metadata (aperture, shutter speed, ISO, focal length)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1t5_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>
            </div>

            <!-- Aesthetic Criteria -->
            <div class="criteria-category">
                <h4>
                    🎨 Aesthetic & Conceptual Quality
                    <span class="category-score" id="photo1AestheticScore">0 / 10</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p1a1" data-points="4" onchange="updateScores()">
                    <label for="p1a1" class="checkpoint-text">Composition enhances the long exposure effect</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1a1_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p1a2" data-points="3" onchange="updateScores()">
                    <label for="p1a2" class="checkpoint-text">Subject matter is interesting and benefits from the motion technique</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1a2_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p1a3" data-points="3" onchange="updateScores()">
                    <label for="p1a3" class="checkpoint-text">Creativity/originality in how motion is captured</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p1a3_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>
            </div>

            <div class="comment-section">
                <h4>💬 Additional Comments</h4>
                <textarea id="photo1Comments" placeholder="Add specific feedback about this long exposure photo..."></textarea>
                <div class="quick-comments">
                    <button class="quick-comment-btn" onclick="addQuickComment('photo1Comments', 'Excellent use of slow shutter speed to create smooth motion trails.')">Smooth Motion</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo1Comments', 'The stability of your camera work really shows in the sharp static elements.')">Good Stability</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo1Comments', 'Consider using a neutral density filter for daytime long exposures.')">ND Filter Tip</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo1Comments', 'Try varying your shutter speeds to see different motion effects.')">Experiment More</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo1Comments', 'The composition effectively guides the eye through the motion.')">Strong Composition</button>
                </div>
            </div>
        </div>

        <!-- Photo 2: Short Exposure -->
        <div class="photo-section" data-photo="2" data-max-score="25">
            <div class="photo-header">
                <div>
                    <h3 class="photo-title">📷 Photo 2 - Short Exposure</h3>
                    <p class="photo-goal">Goal: Freeze a fast-moving subject clearly (e.g., splash, jump, fast object)</p>
                </div>
                <div class="score-display">
                    <span id="photo2Score">0</span> / 25
                </div>
            </div>

            <!-- Technical Criteria -->
            <div class="criteria-category">
                <h4>
                    🔧 Technical Execution
                    <span class="category-score" id="photo2TechnicalScore">0 / 12</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p2t1" data-points="4" onchange="updateScores()">
                    <label for="p2t1" class="checkpoint-text">Fast shutter speed used (e.g., 1/1000s or faster)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2t1_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p2t2" data-points="4" onchange="updateScores()">
                    <label for="p2t2" class="checkpoint-text">Subject is perfectly frozen with no motion blur</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2t2_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p2t3" data-points="2" onchange="updateScores()">
                    <label for="p2t3" class="checkpoint-text">Proper exposure achieved despite fast shutter (not underexposed)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2t3_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p2t4" data-points="2" onchange="updateScores()">
                    <label for="p2t4" class="checkpoint-text">Caption includes full metadata (aperture, shutter speed, ISO, focal length)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2t4_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>
            </div>

            <!-- Aesthetic Criteria -->
            <div class="criteria-category">
                <h4>
                    🎨 Aesthetic & Conceptual Quality
                    <span class="category-score" id="photo2AestheticScore">0 / 13</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p2a1" data-points="4" onchange="updateScores()">
                    <label for="p2a1" class="checkpoint-text">Action or movement captured at a compelling moment ("decisive moment")</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2a1_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p2a2" data-points="4" onchange="updateScores()">
                    <label for="p2a2" class="checkpoint-text">Composition effectively frames the frozen action</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2a2_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p2a3" data-points="3" onchange="updateScores()">
                    <label for="p2a3" class="checkpoint-text">Creativity in subject selection or timing</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2a3_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p2a4" data-points="2" onchange="updateScores()">
                    <label for="p2a4" class="checkpoint-text">Strong visual impact and clarity</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p2a4_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>
            </div>

            <div class="comment-section">
                <h4>💬 Additional Comments</h4>
                <textarea id="photo2Comments" placeholder="Add specific feedback about this short exposure photo..."></textarea>
                <div class="quick-comments">
                    <button class="quick-comment-btn" onclick="addQuickComment('photo2Comments', 'Perfect timing! You captured the decisive moment beautifully.')">Perfect Timing</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo2Comments', 'The frozen action is sharp and clear - excellent technique.')">Sharp Freeze</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo2Comments', 'Consider using continuous autofocus (AF-C) for moving subjects.')">AF-C Tip</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo2Comments', 'Try pre-focusing on where the action will happen.')">Pre-focus Tip</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo2Comments', 'Great use of high ISO to maintain fast shutter speed.')">ISO Management</button>
                </div>
            </div>
        </div>

        <!-- Photo 3: Large Aperture -->
        <div class="photo-section" data-photo="3" data-max-score="20">
            <div class="photo-header">
                <div>
                    <h3 class="photo-title">📷 Photo 3 - Large Aperture (Shallow DOF)</h3>
                    <p class="photo-goal">Goal: Blur the background while keeping subject in focus (e.g., f/2.8 or lower)</p>
                </div>
                <div class="score-display">
                    <span id="photo3Score">0</span> / 20
                </div>
            </div>

            <!-- Technical Criteria -->
            <div class="criteria-category">
                <h4>
                    🔧 Technical Execution
                    <span class="category-score" id="photo3TechnicalScore">0 / 12</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p3t1" data-points="4" onchange="updateScores()">
                    <label for="p3t1" class="checkpoint-text">Large aperture used (e.g., f/1.4–f/4) clearly visible in depth of field</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3t1_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p3t2" data-points="4" onchange="updateScores()">
                    <label for="p3t2" class="checkpoint-text">Subject in sharp focus; background sufficiently blurred</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3t2_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p3t3" data-points="2" onchange="updateScores()">
                    <label for="p3t3" class="checkpoint-text">Exposure well balanced despite wide aperture</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3t3_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p3t4" data-points="2" onchange="updateScores()">
                    <label for="p3t4" class="checkpoint-text">Caption includes full metadata (aperture, shutter speed, ISO, focal length)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3t4_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>
            </div>

            <!-- Aesthetic Criteria -->
            <div class="criteria-category">
                <h4>
                    🎨 Aesthetic & Conceptual Quality
                    <span class="category-score" id="photo3AestheticScore">0 / 8</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p3a1" data-points="3" onchange="updateScores()">
                    <label for="p3a1" class="checkpoint-text">Composition emphasizes subject effectively using DOF</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3a1_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p3a2" data-points="2" onchange="updateScores()">
                    <label for="p3a2" class="checkpoint-text">Same framing/angle as Small Aperture image for comparison</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3a2_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p3a3" data-points="3" onchange="updateScores()">
                    <label for="p3a3" class="checkpoint-text">Artistic or intentional use of blur (bokeh quality)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p3a3_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>
            </div>

            <div class="comment-section">
                <h4>💬 Additional Comments</h4>
                <textarea id="photo3Comments" placeholder="Add specific feedback about this large aperture photo..."></textarea>
                <div class="quick-comments">
                    <button class="quick-comment-btn" onclick="addQuickComment('photo3Comments', 'Beautiful bokeh! The background blur really isolates the subject.')">Great Bokeh</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo3Comments', 'Perfect focus on the subject with creamy background separation.')">Focus Success</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo3Comments', 'Consider the distance between subject and background for more blur.')">Distance Tip</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo3Comments', 'The shallow DOF effectively draws attention to your subject.')">DOF Impact</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo3Comments', 'Watch for focus accuracy when using very wide apertures.')">Focus Warning</button>
                </div>
            </div>
        </div>

        <!-- Photo 4: Small Aperture -->
        <div class="photo-section" data-photo="4" data-max-score="20">
            <div class="photo-header">
                <div>
                    <h3 class="photo-title">📷 Photo 4 - Small Aperture (Deep DOF)</h3>
                    <p class="photo-goal">Goal: Keep both subject and background in focus (e.g., f/11 or higher)</p>
                </div>
                <div class="score-display">
                    <span id="photo4Score">0</span> / 20
                </div>
            </div>

            <!-- Technical Criteria -->
            <div class="criteria-category">
                <h4>
                    🔧 Technical Execution
                    <span class="category-score" id="photo4TechnicalScore">0 / 12</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p4t1" data-points="4" onchange="updateScores()">
                    <label for="p4t1" class="checkpoint-text">Small aperture used (e.g., f/11–f/22); entire scene sharp</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4t1_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p4t2" data-points="4" onchange="updateScores()">
                    <label for="p4t2" class="checkpoint-text">Focus is clear across foreground and background</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4t2_points" min="0" max="4" value="0" onchange="updateScores()">
                        <span>/ 4</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p4t3" data-points="2" onchange="updateScores()">
                    <label for="p4t3" class="checkpoint-text">Exposure correctly balanced (not too dark due to small aperture)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4t3_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p4t4" data-points="2" onchange="updateScores()">
                    <label for="p4t4" class="checkpoint-text">Caption includes full metadata (aperture, shutter speed, ISO, focal length)</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4t4_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>
            </div>

            <!-- Aesthetic Criteria -->
            <div class="criteria-category">
                <h4>
                    🎨 Aesthetic & Conceptual Quality
                    <span class="category-score" id="photo4AestheticScore">0 / 8</span>
                </h4>
                
                <div class="checkpoint-item">
                    <input type="checkbox" id="p4a1" data-points="2" onchange="updateScores()">
                    <label for="p4a1" class="checkpoint-text">Same framing/angle as Large Aperture photo</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4a1_points" min="0" max="2" value="0" onchange="updateScores()">
                        <span>/ 2</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p4a2" data-points="3" onchange="updateScores()">
                    <label for="p4a2" class="checkpoint-text">Background provides additional context or meaning</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4a2_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>

                <div class="checkpoint-item">
                    <input type="checkbox" id="p4a3" data-points="3" onchange="updateScores()">
                    <label for="p4a3" class="checkpoint-text">Composition takes advantage of clarity across the scene</label>
                    <div class="checkpoint-points">
                        <input type="number" id="p4a3_points" min="0" max="3" value="0" onchange="updateScores()">
                        <span>/ 3</span>
                    </div>
                </div>
            </div>

            <div class="comment-section">
                <h4>💬 Additional Comments</h4>
                <textarea id="photo4Comments" placeholder="Add specific feedback about this small aperture photo..."></textarea>
                <div class="quick-comments">
                    <button class="quick-comment-btn" onclick="addQuickComment('photo4Comments', 'Excellent sharpness throughout the frame from front to back.')">Full Sharpness</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo4Comments', 'The deep DOF shows great technical control and planning.')">Technical Control</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo4Comments', 'Good comparison with the large aperture shot - clear difference.')">Good Comparison</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo4Comments', 'Consider hyperfocal distance for maximum sharpness range.')">Hyperfocal Tip</button>
                    <button class="quick-comment-btn" onclick="addQuickComment('photo4Comments', 'Watch for diffraction at very small apertures (f/22+).')">Diffraction Warning</button>
                </div>
            </div>
        </div>

        <!-- Reflection & Presentation -->
        <div class="reflection-section">
            <h3>✍️ Reflection & Presentation (10 pts)</h3>
            <div class="reflection-grid">
                <div class="reflection-item">
                    <label>PDF Formatting & Presentation:</label>
                    <input type="number" id="pdfScore" min="0" max="2" value="0" onchange="updateScores()"> / 2
                </div>
                <div class="reflection-item">
                    <label>Reflection Writing (200 words):</label>
                    <input type="number" id="reflectionScore" min="0" max="4" value="0" onchange="updateScores()"> / 4
                </div>
                <div class="reflection-item">
                    <label>Behind the Scenes Documentation:</label>
                    <input type="number" id="btsScore" min="0" max="2" value="0" onchange="updateScores()"> / 2
                </div>
                <div class="reflection-item">
                    <label>Statement of Authorship:</label>
                    <input type="number" id="authorshipScore" min="0" max="1" value="0" onchange="updateScores()"> / 1
                </div>
                <div class="reflection-item">
                    <label>OneDrive Link & Submission:</label>
                    <input type="number" id="submissionScore" min="0" max="1" value="0" onchange="updateScores()"> / 1
                </div>
            </div>
            <div class="comment-section">
                <h4>Reflection Comments</h4>
                <textarea id="reflectionComments" placeholder="Comments on reflection quality, insights shown, and presentation..."></textarea>
            </div>
        </div>

        <!-- Final Grade -->
        <div class="final-grade">
            <h3>🧮 Overall Grade</h3>
            <div class="grade-display" id="totalScore">0 / 100</div>
            <div id="gradeLevel" style="font-size: 1.5rem; margin-bottom: 20px;"></div>
            
            <div class="grade-breakdown">
                <div class="breakdown-item">
                    <span>Photos Total (90 pts):</span>
                    <span id="photosTotal">0</span>
                </div>
                <div class="breakdown-item">
                    <span>Reflection Total (10 pts):</span>
                    <span id="reflectionTotal">0</span>
                </div>
                <div class="breakdown-item" style="background: #e7f5e7;">
                    <span style="color: #28a745;">Photos Percentage:</span>
                    <span id="photosPercentage" style="color: #28a745; font-weight: bold;">0%</span>
                </div>
                <div class="breakdown-item" style="background: #fff3cd;">
                    <span style="color: #856404;">Overall Percentage:</span>
                    <span id="overallPercentage" style="color: #856404; font-weight: bold;">0%</span>
                </div>
            </div>

            <!-- Rubric Summary Section -->
            <div style="margin-top: 30px; padding: 20px; background: linear-gradient(135deg, #f8f9fa, #e9ecef); border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h4 style="margin-bottom: 20px; color: #333; text-align: center; font-size: 1.3rem;">📊 Rubric Assessment Summary</h4>
                
                <!-- Aesthetic Achievement -->
                <div style="margin-bottom: 25px; padding: 20px; background: white; border-radius: 8px; border-left: 5px solid #764ba2; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                    <h5 style="margin-bottom: 15px; color: #764ba2; font-size: 1.1rem;">🎨 Aesthetic Achievement</h5>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 1.1rem;">Total Score:</span>
                        <span style="font-size: 1.8rem; font-weight: bold; color: #764ba2;">
                            <span id="aestheticTotal">0</span> / 30
                        </span>
                    </div>
                    <div id="aestheticGrade" style="font-weight: bold; color: #764ba2; margin-bottom: 10px; font-size: 1.1rem;"></div>
                    <div id="aestheticDescription" style="line-height: 1.5; color: #555; font-size: 0.95rem; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
                </div>

                <!-- Technical Skills -->
                <div style="padding: 20px; background: white; border-radius: 8px; border-left: 5px solid #667eea; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                    <h5 style="margin-bottom: 15px; color: #667eea; font-size: 1.1rem;">🔧 Technical Skills</h5>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 1.1rem;">Total Score:</span>
                        <span style="font-size: 1.8rem; font-weight: bold; color: #667eea;">
                            <span id="technicalTotal">0</span> / 70
                        </span>
                    </div>
                    <div id="technicalGrade" style="font-weight: bold; color: #667eea; margin-bottom: 10px; font-size: 1.1rem;"></div>
                    <div id="technicalDescription" style="line-height: 1.5; color: #555; font-size: 0.95rem; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
                </div>
            </div>
            
            <div class="grade-descriptor">
                <div class="descriptor-item" id="hd-desc">
                    <strong>HD (85-100):</strong> Excellent command of exposure/aperture; creative intent very clear.
                </div>
                <div class="descriptor-item" id="di-desc">
                    <strong>DI (75-84):</strong> Strong technical and aesthetic control; minor improvement areas.
                </div>
                <div class="descriptor-item" id="cr-desc">
                    <strong>CR (65-74):</strong> Meets expectations; demonstrates understanding with flaws.
                </div>
                <div class="descriptor-item" id="pa-desc">
                    <strong>PA (50-64):</strong> Basic competency; needs more control/clarity.
                </div>
                <div class="descriptor-item" id="nn-desc">
                    <strong>NN (&lt;50):</strong> Below expectations; resubmission or further review needed.
                </div>
            </div>

            <div class="comment-section">
                <h4>Final Comments</h4>
                <textarea id="finalComments" placeholder="Overall feedback, strengths, areas for improvement, and recommendations..."></textarea>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn btn-primary" onclick="updateScores()">Update All Scores</button>
            <button class="btn btn-secondary" onclick="generateDetailedReport()">Generate Detailed Report</button>
            <button class="btn btn-success" onclick="saveGrade()">Save Grade</button>
            <button class="btn btn-warning" onclick="exportToExcel()">Export to Excel</button>
            <button class="btn btn-secondary" onclick="resetForm()">Reset Form</button>
        </div>
    </div>

    <script>
        // Set today's date
        document.getElementById('gradingDate').value = new Date().toISOString().split('T')[0];

        // When checkbox is checked, auto-fill points
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const pointsInput = document.getElementById(this.id + '_points');
                if (pointsInput) {
                    if (this.checked) {
                        pointsInput.value = pointsInput.max;
                    } else {
                        pointsInput.value = 0;
                    }
                    updateScores();
                }
            });
        });

        function updateScores() {
            // Update progress
            updateProgress();
            
            // Photo 1 Scores
            const p1Technical = ['p1t1', 'p1t2', 'p1t3', 'p1t4', 'p1t5'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            const p1Aesthetic = ['p1a1', 'p1a2', 'p1a3'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            document.getElementById('photo1TechnicalScore').textContent = `${p1Technical} / 15`;
            document.getElementById('photo1AestheticScore').textContent = `${p1Aesthetic} / 10`;
            document.getElementById('photo1Score').textContent = p1Technical + p1Aesthetic;

            // Photo 2 Scores
            const p2Technical = ['p2t1', 'p2t2', 'p2t3', 'p2t4'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            const p2Aesthetic = ['p2a1', 'p2a2', 'p2a3', 'p2a4'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            document.getElementById('photo2TechnicalScore').textContent = `${p2Technical} / 12`;
            document.getElementById('photo2AestheticScore').textContent = `${p2Aesthetic} / 13`;
            document.getElementById('photo2Score').textContent = p2Technical + p2Aesthetic;

            // Photo 3 Scores
            const p3Technical = ['p3t1', 'p3t2', 'p3t3', 'p3t4'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            const p3Aesthetic = ['p3a1', 'p3a2', 'p3a3'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            document.getElementById('photo3TechnicalScore').textContent = `${p3Technical} / 12`;
            document.getElementById('photo3AestheticScore').textContent = `${p3Aesthetic} / 8`;
            document.getElementById('photo3Score').textContent = p3Technical + p3Aesthetic;

            // Photo 4 Scores
            const p4Technical = ['p4t1', 'p4t2', 'p4t3', 'p4t4'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            const p4Aesthetic = ['p4a1', 'p4a2', 'p4a3'].reduce((sum, id) => {
                return sum + (parseInt(document.getElementById(id + '_points').value) || 0);
            }, 0);
            document.getElementById('photo4TechnicalScore').textContent = `${p4Technical} / 12`;
            document.getElementById('photo4AestheticScore').textContent = `${p4Aesthetic} / 8`;
            document.getElementById('photo4Score').textContent = p4Technical + p4Aesthetic;

            // Calculate totals
            const photosTotal = (p1Technical + p1Aesthetic) + (p2Technical + p2Aesthetic) + 
                               (p3Technical + p3Aesthetic) + (p4Technical + p4Aesthetic);
            document.getElementById('photosTotal').textContent = photosTotal;

            const reflectionTotal = ['pdfScore', 'reflectionScore', 'btsScore', 'authorshipScore', 'submissionScore']
                .reduce((sum, id) => sum + (parseInt(document.getElementById(id).value) || 0), 0);
            document.getElementById('reflectionTotal').textContent = reflectionTotal;

            const total = photosTotal + reflectionTotal;
            document.getElementById('totalScore').textContent = `${total} / 100`;
            
            // Calculate percentages
            const photosPercentage = Math.round((photosTotal / 90) * 100);
            const overallPercentage = Math.round((total / 100) * 100);
            document.getElementById('photosPercentage').textContent = photosPercentage + '%';
            document.getElementById('overallPercentage').textContent = overallPercentage + '%';

            // Calculate rubric totals
            const totalAesthetic = p1Aesthetic + p2Aesthetic + p3Aesthetic + p4Aesthetic;
            const totalTechnical = p1Technical + p2Technical + p3Technical + p4Technical;
            
            // Scale to rubric requirements (Aesthetic: 30 pts, Technical: 70 pts)
            // Current max: Aesthetic = 39 pts, Technical = 51 pts
            const scaledAesthetic = Math.round((totalAesthetic / 39) * 30);
            const scaledTechnical = Math.round((totalTechnical / 51) * 70);
            
            document.getElementById('aestheticTotal').textContent = scaledAesthetic;
            document.getElementById('technicalTotal').textContent = scaledTechnical;
            
            // Update aesthetic grade
            updateAestheticGrade(scaledAesthetic);
            
            // Update technical grade
            updateTechnicalGrade(scaledTechnical);

            // Update overall grade level
            updateGradeLevel(total);
        }

        function updateAestheticGrade(score) {
            let grade = '';
            let description = '';
            
            if (score > 23.9) {
                grade = 'High Distinction (HD)';
                description = 'Strong evidence of authorial intent evident within the creative outcome. Within the expectations of the program, the creative outcome evidences originality and innovation.';
            } else if (score > 20.9) {
                grade = 'Distinction (DI)';
                description = 'Significant evidence that the formal properties of the creative outcome serve a clear visual function. This visual function evidences authorial intent.';
            } else if (score > 17.9) {
                grade = 'Credit (CR)';
                description = 'Evidence of the formal properties of the creative outcome having been effectively structured. There is some evidence that this structure serves a unified visual function.';
            } else if (score > 14.9) {
                grade = 'Pass (PA)';
                description = 'Evidence of some understanding of the basic formal requirements of the task, however the aesthetic attributes of the creative outcome lack stylistic unity.';
            } else {
                grade = 'Fail (NN)';
                description = 'The formal requirements of the creative outcome are ill-considered. There is little evidence of such aesthetic properties as unity, coherence, or visual function.';
            }
            
            document.getElementById('aestheticGrade').textContent = grade;
            document.getElementById('aestheticDescription').textContent = description;
        }

        function updateTechnicalGrade(score) {
            let grade = '';
            let description = '';
            
            if (score > 55.9) {
                grade = 'High Distinction (HD)';
                description = 'Extensive evidence of the appropriate selection and highly skilful execution of techniques. Application of skills may lead to conceptual advances within the topic.';
            } else if (score > 48.9) {
                grade = 'Distinction (DI)';
                description = 'Significant evidence of the appropriate selection and skilful execution of techniques.';
            } else if (score > 41.9) {
                grade = 'Credit (CR)';
                description = 'Clear evidence of the appropriate selection and execution of techniques.';
            } else if (score > 34.9) {
                grade = 'Pass (PA)';
                description = 'Evidence of appropriate selection of techniques, which may require more skilful execution.';
            } else {
                grade = 'Fail (NN)';
                description = 'Little or no evidence of appropriate selection of techniques, and significant gaps in skill execution.';
            }
            
            document.getElementById('technicalGrade').textContent = grade;
            document.getElementById('technicalDescription').textContent = description;
        }

        function updateGradeLevel(total) {
            let gradeLevel = '';
            let gradeColor = '';
            let gradeBadge = '';
            
            // Clear all active classes
            document.querySelectorAll('.descriptor-item').forEach(item => {
                item.classList.remove('active');
            });
            
            if (total >= 85) {
                gradeLevel = 'High Distinction';
                gradeBadge = 'HD';
                gradeColor = '#28a745';
                document.getElementById('hd-desc').classList.add('active');
            } else if (total >= 75) {
                gradeLevel = 'Distinction';
                gradeBadge = 'DI';
                gradeColor = '#17a2b8';
                document.getElementById('di-desc').classList.add('active');
            } else if (total >= 65) {
                gradeLevel = 'Credit';
                gradeBadge = 'CR';
                gradeColor = '#ffc107';
                document.getElementById('cr-desc').classList.add('active');
            } else if (total >= 50) {
                gradeLevel = 'Pass';
                gradeBadge = 'PA';
                gradeColor = '#fd7e14';
                document.getElementById('pa-desc').classList.add('active');
            } else {
                gradeLevel = 'Not Yet Competent';
                gradeBadge = 'NN';
                gradeColor = '#dc3545';
                document.getElementById('nn-desc').classList.add('active');
            }
            
            const gradeLevelElement = document.getElementById('gradeLevel');
            gradeLevelElement.innerHTML = `<span style="background: ${gradeColor}; color: white; padding: 5px 15px; border-radius: 20px; font-size: 1rem; margin-right: 10px;">${gradeBadge}</span>${gradeLevel}`;
        }

        function updateProgress() {
            const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
            const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked');
            const percentage = Math.round((checkedBoxes.length / allCheckboxes.length) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressPercent').textContent = percentage + '%';
        }

        function addQuickComment(textareaId, comment) {
            const textarea = document.getElementById(textareaId);
            if (textarea.value) {
                textarea.value += ' ' + comment;
            } else {
                textarea.value = comment;
            }
        }

        function getGradeLevelText() {
            const gradeLevelElement = document.getElementById('gradeLevel');
            return gradeLevelElement.textContent.trim();
        }

        function generateDetailedReport() {
            const studentName = document.getElementById('studentName').value || '[Student Name]';
            const studentId = document.getElementById('studentId').value || '[Student ID]';
            const date = document.getElementById('gradingDate').value;
            
            let report = `PHOTOGRAPHY 101 - ASSIGNMENT 1: PHOTOGRAPHIC TECHNIQUES\n`;
            report += `DETAILED GRADING REPORT WITH CHECKPOINTS\n`;
            report += `=======================================================\n\n`;
            report += `Student: ${studentName}\n`;
            report += `ID: ${studentId}\n`;
            report += `Date: ${date}\n\n`;
            
            // Photo scores summary
            report += `SUMMARY\n`;
            report += `-------\n`;
            report += `Photo 1 (Long Exposure): ${document.getElementById('photo1Score').textContent}/25\n`;
            report += `Photo 2 (Short Exposure): ${document.getElementById('photo2Score').textContent}/25\n`;
            report += `Photo 3 (Large Aperture): ${document.getElementById('photo3Score').textContent}/20\n`;
            report += `Photo 4 (Small Aperture): ${document.getElementById('photo4Score').textContent}/20\n`;
            report += `Reflection & Presentation: ${document.getElementById('reflectionTotal').textContent}/10\n`;
            report += `TOTAL: ${document.getElementById('totalScore').textContent.split('/')[0]}/100 - ${getGradeLevelText()}\n\n`;
            
            // Detailed breakdown for each photo
            report += `DETAILED BREAKDOWN\n`;
            report += `==================\n\n`;
            
            // Photo 1
            report += `PHOTO 1 - LONG EXPOSURE (${document.getElementById('photo1Score').textContent}/25)\n`;
            report += `--------------------------------------------\n`;
            report += `Technical Execution (${document.getElementById('photo1TechnicalScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p1t1', 'Use of slow shutter speed clearly visible');
            report = addCheckpointToReport(report, 'p1t2', 'Image is correctly exposed');
            report = addCheckpointToReport(report, 'p1t3', 'Camera stability');
            report = addCheckpointToReport(report, 'p1t4', 'Clear motion effect');
            report = addCheckpointToReport(report, 'p1t5', 'Caption includes full metadata');
            
            report += `\nAesthetic & Conceptual Quality (${document.getElementById('photo1AestheticScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p1a1', 'Composition enhances long exposure');
            report = addCheckpointToReport(report, 'p1a2', 'Subject matter is interesting');
            report = addCheckpointToReport(report, 'p1a3', 'Creativity/originality');
            
            if (document.getElementById('photo1Comments').value) {
                report += `\nComments: ${document.getElementById('photo1Comments').value}\n`;
            }
            report += `\n`;
            
            // Photo 2
            report += `PHOTO 2 - SHORT EXPOSURE (${document.getElementById('photo2Score').textContent}/25)\n`;
            report += `--------------------------------------------\n`;
            report += `Technical Execution (${document.getElementById('photo2TechnicalScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p2t1', 'Fast shutter speed used');
            report = addCheckpointToReport(report, 'p2t2', 'Subject is perfectly frozen');
            report = addCheckpointToReport(report, 'p2t3', 'Proper exposure achieved');
            report = addCheckpointToReport(report, 'p2t4', 'Caption includes full metadata');
            
            report += `\nAesthetic & Conceptual Quality (${document.getElementById('photo2AestheticScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p2a1', 'Compelling moment captured');
            report = addCheckpointToReport(report, 'p2a2', 'Composition frames action');
            report = addCheckpointToReport(report, 'p2a3', 'Creativity in subject/timing');
            report = addCheckpointToReport(report, 'p2a4', 'Strong visual impact');
            
            if (document.getElementById('photo2Comments').value) {
                report += `\nComments: ${document.getElementById('photo2Comments').value}\n`;
            }
            report += `\n`;
            
            // Photo 3
            report += `PHOTO 3 - LARGE APERTURE (${document.getElementById('photo3Score').textContent}/20)\n`;
            report += `--------------------------------------------\n`;
            report += `Technical Execution (${document.getElementById('photo3TechnicalScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p3t1', 'Large aperture used');
            report = addCheckpointToReport(report, 'p3t2', 'Subject sharp, background blurred');
            report = addCheckpointToReport(report, 'p3t3', 'Exposure well balanced');
            report = addCheckpointToReport(report, 'p3t4', 'Caption includes full metadata');
            
            report += `\nAesthetic & Conceptual Quality (${document.getElementById('photo3AestheticScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p3a1', 'Composition emphasizes subject');
            report = addCheckpointToReport(report, 'p3a2', 'Same framing as small aperture');
            report = addCheckpointToReport(report, 'p3a3', 'Artistic use of blur');
            
            if (document.getElementById('photo3Comments').value) {
                report += `\nComments: ${document.getElementById('photo3Comments').value}\n`;
            }
            report += `\n`;
            
            // Photo 4
            report += `PHOTO 4 - SMALL APERTURE (${document.getElementById('photo4Score').textContent}/20)\n`;
            report += `--------------------------------------------\n`;
            report += `Technical Execution (${document.getElementById('photo4TechnicalScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p4t1', 'Small aperture used');
            report = addCheckpointToReport(report, 'p4t2', 'Focus clear throughout');
            report = addCheckpointToReport(report, 'p4t3', 'Exposure correctly balanced');
            report = addCheckpointToReport(report, 'p4t4', 'Caption includes full metadata');
            
            report += `\nAesthetic & Conceptual Quality (${document.getElementById('photo4AestheticScore').textContent}):\n`;
            report = addCheckpointToReport(report, 'p4a1', 'Same framing as large aperture');
            report = addCheckpointToReport(report, 'p4a2', 'Background adds context');
            report = addCheckpointToReport(report, 'p4a3', 'Composition uses clarity');
            
            if (document.getElementById('photo4Comments').value) {
                report += `\nComments: ${document.getElementById('photo4Comments').value}\n`;
            }
            report += `\n`;
            
            // Reflection section
            report += `REFLECTION & PRESENTATION (${document.getElementById('reflectionTotal').textContent}/10)\n`;
            report += `--------------------------------------------\n`;
            report += `PDF Formatting: ${document.getElementById('pdfScore').value}/2\n`;
            report += `Reflection Writing: ${document.getElementById('reflectionScore').value}/4\n`;
            report += `Behind the Scenes: ${document.getElementById('btsScore').value}/2\n`;
            report += `Statement of Authorship: ${document.getElementById('authorshipScore').value}/1\n`;
            report += `OneDrive Link: ${document.getElementById('submissionScore').value}/1\n`;
            
            if (document.getElementById('reflectionComments').value) {
                report += `\nComments: ${document.getElementById('reflectionComments').value}\n`;
            }
            
            // Final comments
            if (document.getElementById('finalComments').value) {
                report += `\n\nFINAL COMMENTS\n`;
                report += `--------------\n`;
                report += document.getElementById('finalComments').value + '\n';
            }
            
            // Add rubric summary
            report += `\n\nRUBRIC ASSESSMENT SUMMARY\n`;
            report += `========================\n\n`;
            
            report += `AESTHETIC ACHIEVEMENT: ${document.getElementById('aestheticTotal').textContent}/30\n`;
            report += `Grade: ${document.getElementById('aestheticGrade').textContent}\n`;
            report += `${document.getElementById('aestheticDescription').textContent}\n\n`;
            
            report += `TECHNICAL SKILLS: ${document.getElementById('technicalTotal').textContent}/70\n`;
            report += `Grade: ${document.getElementById('technicalGrade').textContent}\n`;
            report += `${document.getElementById('technicalDescription').textContent}\n`;
            
            // Download report
            downloadTextFile(report, `${studentName.replace(/\s+/g, '_')}_${studentId}_detailed_report.txt`);
        }

        function addCheckpointToReport(report, checkpointId, description) {
            const checkbox = document.getElementById(checkpointId);
            const points = document.getElementById(checkpointId + '_points');
            const status = checkbox.checked ? '✓' : '✗';
            report += `  ${status} ${description}: ${points.value}/${points.max}\n`;
            return report;
        }

        function downloadTextFile(content, filename) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function saveGrade() {
            const studentName = document.getElementById('studentName').value;
            const studentId = document.getElementById('studentId').value;
            
            if (!studentName || !studentId) {
                alert('Please enter student name and ID before saving.');
                return;
            }
            
            const gradeData = {
                studentName: studentName,
                studentId: studentId,
                date: document.getElementById('gradingDate').value,
                checkpoints: {},
                scores: {
                    photo1: document.getElementById('photo1Score').textContent,
                    photo2: document.getElementById('photo2Score').textContent,
                    photo3: document.getElementById('photo3Score').textContent,
                    photo4: document.getElementById('photo4Score').textContent,
                    photosTotal: document.getElementById('photosTotal').textContent,
                    reflectionTotal: document.getElementById('reflectionTotal').textContent
                },
                rubricAssessment: {
                    aesthetic: {
                        score: document.getElementById('aestheticTotal').textContent,
                        grade: document.getElementById('aestheticGrade').textContent,
                        description: document.getElementById('aestheticDescription').textContent
                    },
                    technical: {
                        score: document.getElementById('technicalTotal').textContent,
                        grade: document.getElementById('technicalGrade').textContent,
                        description: document.getElementById('technicalDescription').textContent
                    }
                },
                comments: {
                    photo1: document.getElementById('photo1Comments').value,
                    photo2: document.getElementById('photo2Comments').value,
                    photo3: document.getElementById('photo3Comments').value,
                    photo4: document.getElementById('photo4Comments').value,
                    reflection: document.getElementById('reflectionComments').value,
                    final: document.getElementById('finalComments').value
                },
                totalScore: parseInt(document.getElementById('totalScore').textContent.split('/')[0]),
                gradeLevel: getGradeLevelText()
            };
            
            // Collect all checkpoint data
            document.querySelectorAll('.checkpoint-item').forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                const pointsInput = item.querySelector('input[type="number"]');
                if (checkbox && pointsInput) {
                    gradeData.checkpoints[checkbox.id] = {
                        checked: checkbox.checked,
                        points: pointsInput.value,
                        maxPoints: pointsInput.max
                    };
                }
            });
            
            // Save to localStorage
            const savedGrades = JSON.parse(localStorage.getItem('photo101DetailedGrades') || '[]');
            savedGrades.push(gradeData);
            localStorage.setItem('photo101DetailedGrades', JSON.stringify(savedGrades));
            
            // Also save as JSON file
            downloadTextFile(JSON.stringify(gradeData, null, 2), 
                `${studentName.replace(/\s+/g, '_')}_${studentId}_grade_data.json`);
            
            alert('Grade saved successfully!');
        }

        function exportToExcel() {
            // Create CSV content
            let csv = 'Photography 101 Grade Export\n\n';
            csv += `Student,${document.getElementById('studentName').value || 'N/A'}\n`;
            csv += `ID,${document.getElementById('studentId').value || 'N/A'}\n`;
            csv += `Date,${document.getElementById('gradingDate').value}\n\n`;
            
            csv += 'Category,Checkpoint,Points,Max Points,Checked\n';
            
            // Add all checkpoints
            document.querySelectorAll('.photo-section').forEach((section, index) => {
                const photoNum = index + 1;
                section.querySelectorAll('.checkpoint-item').forEach(item => {
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    const pointsInput = item.querySelector('input[type="number"]');
                    const description = item.querySelector('.checkpoint-text').textContent;
                    
                    csv += `Photo ${photoNum},${description},${pointsInput.value},${pointsInput.max},${checkbox.checked ? 'Yes' : 'No'}\n`;
                });
            });
            
            csv += `\nTotal Score,${document.getElementById('totalScore').textContent.split('/')[0]},100\n`;
            csv += `Grade Level,${getGradeLevelText()}\n\n`;
            
            csv += `Rubric Assessment\n`;
            csv += `Aesthetic Achievement,${document.getElementById('aestheticTotal').textContent},30,${document.getElementById('aestheticGrade').textContent}\n`;
            csv += `Technical Skills,${document.getElementById('technicalTotal').textContent},70,${document.getElementById('technicalGrade').textContent}\n`;
            
            // Download CSV
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${document.getElementById('studentName').value || 'student'}_grade_export.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function resetForm() {
            if (confirm('Are you sure you want to reset all fields? This cannot be undone.')) {
                document.getElementById('studentName').value = '';
                document.getElementById('studentId').value = '';
                document.getElementById('gradingDate').value = new Date().toISOString().split('T')[0];
                
                // Reset all checkboxes and points
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    cb.checked = false;
                });
                
                document.querySelectorAll('input[type="number"]').forEach(input => {
                    input.value = '0';
                });
                
                // Clear all textareas
                document.querySelectorAll('textarea').forEach(textarea => {
                    textarea.value = '';
                });
                
                updateScores();
            }
        }

        // Initialize
        updateScores();
    </script>
</body>
</html>